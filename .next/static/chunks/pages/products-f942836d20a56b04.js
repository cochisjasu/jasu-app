(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[345],{2385:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products",function(){return n(40072)}])},40072:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var r=n(47568),a=n(14924),i=n(26042),s=n(69396),u=n(70655),o=n(85893),c=n(67294),l=n(41120),f=n(8920),h=n(63457),d=n(43832),p=n(50253),g=n(22318),m=n(66261),P=n(66252),v=n(76935),S=n(3107),Z=n(58765),_=n(16426),N=(0,l.Z)((function(e){var t;return{root:(t={maxWidth:"none"},(0,a.Z)(t,e.breakpoints.up("lg"),{paddingTop:"64px"}),(0,a.Z)(t,"backgroundColor",e.palette.background.main),t),container:{paddingBlock:"64px",maxWidth:e.breakpoints.values.lg,marginInline:"auto"},productserror:{minHeight:"20vh",textAlign:"center",fontWeight:"bold",fontSize:"40px",lineHeight:"73px",color:e.palette.green.dark,paddingBlock:e.spacing(3)}}}));function T(){var e=(0,c.useState)(2),t=e[0],n=e[1],a=(0,c.useState)(1),l=a[0],T=a[1],y=(0,c.useState)("A-Z"),E=y[0],b=y[1],k=(0,c.useState)(S.q5.PRODUCTS),w=k[0],C=k[1],x=(0,c.useState)(new Array(10).fill({})),q=x[0],O=x[1],R=(0,c.useState)(q.length),A=R[0],j=R[1],I=(0,c.useState)([]),D=I[0],F=I[1],U=m.OK,B=N(),L=(0,f.Z)(),W=(0,h.Z)(L.breakpoints.up("lg")),H=(0,P.x)(),M=(0,v.Ds)().enqueueSnackbar,V=[12,24,48],X=(0,c.useContext)(_._y),z=X.agent,G=X.dictionary,K=X.setLoading,J=(0,c.useCallback)((0,r.Z)((function(){var e,t,n;return(0,u.__generator)(this,(function(a){switch(a.label){case 0:return e=function(){var e=(0,r.Z)((function(){var e,t,n;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return[4,H.query({query:w===S.q5.PRODUCTS?Z.fruitCategories:Z.presentationCategories,fetchPolicy:"no-cache"})];case 1:if(e=r.sent(),t=e.errors,n=e.data,t&&t.length>0)throw new Error(t[0].message);return[2,n[w===S.q5.PRODUCTS?"fruitCategories":"presentationCategories"]]}}))}));return function(){return e.apply(this,arguments)}}(),[4,e()];case 1:return t=a.sent(),n=t.map((function(e){return{id:e.id,name:e.name,checked:!0}})),F(n),[2]}}))})),[w,z]),Q=(0,c.useCallback)((0,r.Z)((function(){var e,n,a,o,c=arguments;return(0,u.__generator)(this,(function(f){switch(f.label){case 0:return e=c.length>0&&void 0!==c[0]?c[0]:[],n=function(){var n=(0,r.Z)((function(){var n,r,a;return(0,u.__generator)(this,(function(i){switch(i.label){case 0:return[4,H.query({query:w===S.q5.PRESENTATION?Z.presentations:Z.fruitVarieties,variables:{pag:l-1,num:V[t],asc:"A-Z"==E,ord:w===S.q5.PRESENTATION?"name":"fullName",filter:{category:e}},fetchPolicy:"no-cache"})];case 1:if(n=i.sent(),r=n.errors,a=n.data,r&&r.length>0)throw new Error(r[0].message);return[2,a[w===S.q5.PRESENTATION?"presentations":"fruitVarieties"]]}}))}));return function(){return n.apply(this,arguments)}}(),[4,n()];case 1:return a=f.sent(),o=a.edges.map((function(e){return(0,s.Z)((0,i.Z)({},e.node),{name:w===S.q5.PRESENTATION?e.node.name:e.node.fullName,picture:w===S.q5.PRESENTATION?e.node.picture:e.node.picture||e.node.fruit.picture,description:w===S.q5.PRESENTATION?e.node.description:e.node.description||e.node.fruit.description})})),O(o),j(a.totalCount),[2]}}))})),[t,l,E,w,D,z]);return(0,c.useEffect)((function(){function e(){return(e=(0,r.Z)((function(){var e;return(0,u.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,J()];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),M("Filters: "+e.toString(),{variant:"error"}),[3,3];case 3:return[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[w,z]),(0,c.useEffect)((function(){function e(){return(e=(0,r.Z)((function(){var e,t;return(0,u.__generator)(this,(function(n){switch(n.label){case 0:j(10),O(new Array(10).fill({})),K(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),e=D.filter((function(e){return e.checked})).map((function(e){return e.id})),[4,Q(e)];case 2:return n.sent(),[3,4];case 3:return t=n.sent(),M("Search: "+t.toString(),{variant:"error"}),[3,4];case 4:return K(!1),[2]}}))}))).apply(this,arguments)}0!==D.length&&function(){e.apply(this,arguments)}()}),[t,l,E,D,z]),(0,c.useEffect)((function(){W?(n(2),T(1)):(n(0),T(1))}),[W]),(0,o.jsx)(c.Fragment,{children:(0,o.jsx)(d.Z,{className:B.root,children:(0,o.jsxs)(p.Z,{className:B.container,children:[(0,o.jsx)(S.ZP.OptionNavbar,{pageType:w,handleChange:function(e,t){C(t)}}),(0,o.jsx)(S.ZP.FiltersBar,{pageType:w,page:l,dataLength:A,labelShow:G.formatString(G.search.showResultsList,w===S.q5.PRODUCTS?G.search.fruits:G.search.presentations),itemsPerPage:t,itemsPerPageOptions:V,handleChangeItemsPerPage:function(e,t){n(t)},sort:E,handleChangeSort:function(e){b(e.target.value),T(1)},showFilters:!0,filters:D,handleChangeFilters:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(w==S.q5.PRODUCTS){var n=e.target.name,r=e.target.checked;F((function(e){return e.map((function(e){return(0,s.Z)((0,i.Z)({},e),{checked:n==e.id?r:e.checked})}))}))}else{var a="";a=W?e.target.value:t,F((function(e){return e.map((function(e){return(0,s.Z)((0,i.Z)({},e),{checked:[e.id,"all"].includes(a)})}))}))}T(1)}}),A?(0,o.jsx)(S.ZP.ResultsGrid,{pageType:w,data:q}):(0,o.jsx)(g.Z,{variant:"h1",className:B.productserror,children:G.search.productsError}),Math.ceil(A/V[t])>1&&(0,o.jsx)(S.ZP.PaginationBar,{count:Math.ceil(A/V[t]),page:l,handleChangePageNumber:function(e,t){U.scrollTo("scrollPagination",{duration:1e3,delay:0,smooth:!0,offset:-64}),T(t)}})]})})})}}},function(e){e.O(0,[653,720,107,774,888,179],(function(){return t=2385,e(e.s=t);var t}));var t=e.O();_N_E=t}]);