(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[161],{69419:function(e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"validateUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"email"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"locale"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"validateUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"email"},value:{kind:"Variable",name:{kind:"Name",value:"email"}}},{kind:"Argument",name:{kind:"Name",value:"locale"},value:{kind:"Variable",name:{kind:"Name",value:"locale"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:253}};n.loc.source={body:"mutation validateUser($id: ID!, $email: String!, $locale: ID!) {\n    validateUser(\n        id: $id\n        email: $email\n        locale: $locale\n    ) {\n        status\n        user{\n            id\n            fullName\n            email\n        }\n    }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function i(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var a=e.type;"NamedType"===a.kind&&n.add(a.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){i(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){i(e,n)})),e.definitions&&e.definitions.forEach((function(e){i(e,n)}))}var a={};function t(e,n){for(var i=0;i<e.definitions.length;i++){var a=e.definitions[i];if(a.name&&a.name.value==n)return a}}n.definitions.forEach((function(e){if(e.name){var n=new Set;i(e,n),a[e.name.value]=n}})),e.exports=n,e.exports.validateUser=function(e,n){var i={kind:e.kind,definitions:[t(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var r=a[n]||new Set,s=new Set,l=new Set;for(r.forEach((function(e){l.add(e)}));l.size>0;){var o=l;l=new Set,o.forEach((function(e){s.has(e)||(s.add(e),(a[e]||new Set).forEach((function(e){l.add(e)})))}))}return s.forEach((function(n){var a=t(e,n);a&&i.definitions.push(a)})),i}(n,"validateUser")},63022:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/confirm",function(){return i(44561)}])},44561:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return f}});var a=i(47568),t=i(70655),r=i(85893),s=i(67294),l=i(11163),o=i(66252),u=i(76935),d=i(16426),c=i(13381),m=i(69419);function f(){var e=(0,s.useContext)(d._y).dictionary,n=(0,s.useState)(e.session.confirmLoading),i=n[0],f=n[1],v=(0,s.useState)(!0),k=v[0],N=v[1],p=(0,o.x)(),h=(0,u.Ds)().enqueueSnackbar,b=(0,l.useRouter)().query,S=b.userId,g=b.email,y=b.locale,w=function(e){f(e),h(e,{variant:"error"})},_=(0,s.useCallback)((0,a.Z)((function(){var n,i;return(0,t.__generator)(this,(function(r){switch(r.label){case 0:return n=function(){var e=(0,a.Z)((function(){var e,n,i;return(0,t.__generator)(this,(function(a){switch(a.label){case 0:return[4,p.mutate({mutation:m.validateUser,variables:{id:S||"",email:g||"",locale:y||"en"}})];case 1:if(e=a.sent(),n=e.errors,i=e.data,n&&n.length>0)throw new Error(n[0].message);return[2,i.validateUser]}}))}));return function(){return e.apply(this,arguments)}}(),[4,n()];case 1:if(i=r.sent())switch(i.status){case 1:case 2:w(e.session.userNotFound);break;case 3:f(e.formatString(e.session.userAlreadyConfirmed,i.user.email));break;case 4:f(e.formatString(e.session.confirmMessage,i.user.email))}else w(e.session.confirmError);return[2]}}))})),[S]);return(0,s.useEffect)((function(){function e(){return(e=(0,a.Z)((function(){var e;return(0,t.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,_()];case 1:return n.sent(),[3,3];case 2:return e=n.sent(),w(e.toString()),[3,3];case 3:return[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),N(!1)}),[S]),(0,r.jsx)(c.ZP.SessionPanel,{children:(0,r.jsx)(c.ZP.Message,{message:i,loading:k})})}}},function(e){e.O(0,[384,381,774,888,179],(function(){return n=63022,e(e.s=n);var n}));var n=e.O();_N_E=n}]);